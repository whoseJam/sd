!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SDAnimation=e():t.SDAnimation=e()}(this,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var e={};function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function o(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}t.d(e,{default:()=>v});var r=new Map,a={},s={},u=0;function f(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=t.getAttribute(e);return null==n?i:n}function d(t){if(void 0!==t){var e=t.split(" ");return{x:+e[0],y:+e[1],width:+e[2],height:+e[3]}}}window.SetAnimationSize=function(t,e,i,n,o,a){var s=document.getElementById(t);r.get(s).reload(i,n,o,a)},window.ResetAnimationSize=function(t,e){var i=document.getElementById(t);r.get(i).reload()};var c=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.iframe=e,e.id||(e.id="iframe_".concat(++u)),this.id=this.iframe.id,this.url=s.getURL?s.getURL(e):f(e,"data-animation"),this.rate=f(e,"data-rate",1.01),this.args=e.onsubmit,this.viewBox=d(f(e,"data-viewBox")),this.viewBoxDelta=d(f(e,"data-viewBoxDelta")),this.maxFrame=f(e,"data-maxFrame",1/0),s.lazy||this.onVisible()},e=[{key:"onVisible",value:function(){var t=this;if(this.hasViewBox()){var e=this.getViewBox();this.iframe.onload=function(){var i=function i(n){n&&n.source!==t.iframe.contentWindow||(t.iframe.contentWindow.SetViewBox(e.x,e.y,e.width,e.height,t.rate),t.iframe.contentWindow.Message("IFRAME_ID",t.id),t.iframe.contentWindow.Message("IFRAME_URL",t.url),t.args&&t.iframe.contentWindow.Message("IFRAME_ARGS",t.args()),t.iframe.contentWindow.Message("IFRAME_INITED",!0),window.removeEventListener("message",i))};t.iframe.contentWindow.SetViewBox?i():window.addEventListener("message",i)}}else this.iframe.onload=function(){var e=function e(i){i&&i.source!==t.iframe.contentWindow||(t.iframe.contentWindow.Message("IFRAME_ID",t.id),t.iframe.contentWindow.Message("IFRAME_URL",t.url),t.args&&iframe.contentWindow.Message("IFRAME_ARGS",t.args()),t.iframe.contentWindow.Message("IFRAME_INITED",!0),t.iframe.contentWindow.Flush(t.id,t.url,t.rate,!1,t.maxFrame),window.removeEventListener("message",e))};t.iframe.contentWindow.SetViewBox?e():window.addEventListener("message",e)};this.iframe.setAttribute("src",this.url)}},{key:"onHidden",value:function(){this.iframe.setAttribute("src","")}},{key:"hasViewBox",value:function(){return void 0!==this.viewBox||void 0!==a[this.url]&&!this.args}},{key:"getViewBox",value:function(t,e,i,n){var o=void 0;if(this.viewBox?o=this.viewBox:a[this.url]?o=a[this.url]:4===arguments.length&&(o={x:t,y:e,width:i,height:n}),void 0===o)throw new Error("View Box Information Not Found!");return this.viewBoxDelta&&(o={x:o.x+this.viewBoxDelta.x,y:o.y+this.viewBoxDelta.y,width:o.width+this.viewBoxDelta.width,height:o.height+this.viewBoxDelta.height}),o}},{key:"reload",value:function(t,e,i,n){var o=this;if(!this.args&&!a[this.url]&&4===arguments.length){var r={x:t,y:e,width:i,height:n};a[this.url]=r}var s=this.getViewBox.apply(this,arguments);this.iframe.onload=function(){var t=function t(e){e&&e.source!==o.iframe.contentWindow||(o.iframe.contentWindow.SetViewBox(s.x,s.y,s.width,s.height,o.rate),o.iframe.contentWindow.Message("IFRAME_ID",o.id),o.iframe.contentWindow.Message("IFRAME_URL",o.url),o.args&&iframe.contentWindow.Message("IFRAME_ARGS",o.args()),o.iframe.contentWindow.Message("IFRAME_INITED",!0),window.removeEventListener("message",t))};o.iframe.contentWindow.SetViewBox?t():window.addEventListener("message",t)},this.iframe.contentWindow.location.reload()}},{key:"startAnimateRequest",value:function(){this.iframe.contentWindow.StartAnimate()}},{key:"stopAnimateRequest",value:function(){this.iframe.contentWindow.StopAnimate()}}],e&&n(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function l(t){r.set(t,new c(t))}function h(t){var e=r.get(t);e&&e.stopAnimateRequest()}function m(t){var e=r.get(t);e&&e.startAnimateRequest()}function w(t){return!!r.get(t)}function v(){return{id:"SDAnimation",init:g}}function g(t){t.addEventListener("slidechanged",(function(t){var e=t.currentSlide,i=t.previousSlide;if(i)for(var n=i.querySelectorAll("iframe[data-animation]"),o=0;o<n.length;o++)h(n[o]);for(var r=e.querySelectorAll("iframe[data-animation]"),a=0;a<r.length;a++)w(r[a])?m(r[a]):l(r[a])})),s={getURL:y}}function y(t){var e=t.getAttribute("data-animation");if(e.endsWith(".js")&&(e=e.replace(".js",".html")),e.startsWith("./animation")||e.startsWith("http")||e.startsWith("animation"))return e;var i=function(t){for(;t.parentNode&&t.parentNode.getAttribute;){var e=t.parentNode;if("slide-host"===e.id)return;if(e.getAttribute("location"))return e.getAttribute("location");t=e}}(t);return i?i+"/"+e:e}return e.default})()));