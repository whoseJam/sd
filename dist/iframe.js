!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("iframe",[],t):"object"==typeof exports?exports.iframe=t():e.iframe=t()}(this,(()=>(()=>{"use strict";var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}e.r(t),e.d(t,{configure:()=>m,has:()=>p,hide:()=>v,init:()=>l,show:()=>h,start:()=>y,stop:()=>g,update:()=>w});var r=new Map,a={},s={},f=0;function u(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=e.getAttribute(t);return null==n?i:n}function d(e){if(void 0!==e){var t=e.split(" ");return{x:+t[0],y:+t[1],width:+t[2],height:+t[3]}}}window.SetAnimationSize=function(e,t,i,n,o,a){var s=document.getElementById(e);r.get(s).reload(i,n,o,a)},window.ResetAnimationSize=function(e,t){var i=document.getElementById(e);r.get(i).reload()};var c=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.iframe=t,t.id||(t.id="iframe_".concat(++f)),this.id=this.iframe.id,this.url=s.getURL?s.getURL(t):u(t,"data-animation"),this.rate=u(t,"data-rate",1.01),this.args=t.onsubmit,this.viewBox=d(u(t,"data-viewBox")),this.viewBoxDelta=d(u(t,"data-viewBoxDelta")),this.maxFrame=u(t,"data-maxFrame",1/0),s.lazy||this.onVisible()},t=[{key:"onVisible",value:function(){var e=this;if(this.hasViewBox()){var t=this.getViewBox();this.iframe.onload=function(){var i=function i(n){n&&n.source!==e.iframe.contentWindow||(e.iframe.contentWindow.SetViewBox(t.x,t.y,t.width,t.height,e.rate),e.iframe.contentWindow.Message("IFRAME_ID",e.id),e.iframe.contentWindow.Message("IFRAME_URL",e.url),e.args&&e.iframe.contentWindow.Message("IFRAME_ARGS",e.args()),e.iframe.contentWindow.Message("IFRAME_INITED",!0),window.removeEventListener("message",i))};e.iframe.contentWindow.SetViewBox?i():window.addEventListener("message",i)}}else this.iframe.onload=function(){var t=function t(i){i&&i.source!==e.iframe.contentWindow||(e.iframe.contentWindow.Message("IFRAME_ID",e.id),e.iframe.contentWindow.Message("IFRAME_URL",e.url),e.args&&iframe.contentWindow.Message("IFRAME_ARGS",e.args()),e.iframe.contentWindow.Message("IFRAME_INITED",!0),e.iframe.contentWindow.Flush(e.id,e.url,e.rate,!1,e.maxFrame),window.removeEventListener("message",t))};e.iframe.contentWindow.SetViewBox?t():window.addEventListener("message",t)};this.iframe.setAttribute("src",this.url)}},{key:"onHidden",value:function(){this.iframe.setAttribute("src","")}},{key:"hasViewBox",value:function(){return void 0!==this.viewBox||void 0!==a[this.url]&&!this.args}},{key:"getViewBox",value:function(e,t,i,n){var o=void 0;if(this.viewBox?o=this.viewBox:a[this.url]?o=a[this.url]:4===arguments.length&&(o={x:e,y:t,width:i,height:n}),void 0===o)throw new Error("View Box Information Not Found!");return this.viewBoxDelta&&(o={x:o.x+this.viewBoxDelta.x,y:o.y+this.viewBoxDelta.y,width:o.width+this.viewBoxDelta.width,height:o.height+this.viewBoxDelta.height}),o}},{key:"reload",value:function(e,t,i,n){var o=this;if(!this.args&&!a[this.url]&&4===arguments.length){var r={x:e,y:t,width:i,height:n};a[this.url]=r}var s=this.getViewBox.apply(this,arguments);this.iframe.onload=function(){var e=function e(t){t&&t.source!==o.iframe.contentWindow||(o.iframe.contentWindow.SetViewBox(s.x,s.y,s.width,s.height,o.rate),o.iframe.contentWindow.Message("IFRAME_ID",o.id),o.iframe.contentWindow.Message("IFRAME_URL",o.url),o.args&&iframe.contentWindow.Message("IFRAME_ARGS",o.args()),o.iframe.contentWindow.Message("IFRAME_INITED",!0),window.removeEventListener("message",e))};o.iframe.contentWindow.SetViewBox?e():window.addEventListener("message",e)},this.iframe.contentWindow.location.reload()}},{key:"startAnimateRequest",value:function(){this.iframe.contentWindow.StartAnimate()}},{key:"stopAnimateRequest",value:function(){this.iframe.contentWindow.StopAnimate()}}],t&&n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function m(e){s=e}function l(e){for(var t=e.querySelectorAll("iframe[data-animation]"),i=0;i<t.length;i++){var n=t[i];r.set(n,new c(n))}}function w(e){r.set(e,new c(e))}function h(e){var t=r.get(e);t&&t.onVisible()}function v(e){var t=r.get(e);t&&t.onHidden()}function g(e){var t=r.get(e);t&&t.stopAnimateRequest()}function y(e){var t=r.get(e);t&&t.startAnimateRequest()}function p(e){return!!r.get(e)}return t})()));